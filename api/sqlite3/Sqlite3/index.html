<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sqlite3 (sqlite3.Sqlite3)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">sqlite3</a> &#x00BB; Sqlite3</nav><header class="odoc-preamble"><h1>Module <code><span>Sqlite3</span></code></h1><p>API for Sqlite 3.* databases</p></header><nav class="odoc-toc"><ul><li><a href="#exceptions">Exceptions</a></li><li><a href="#library-information">Library Information</a></li><li><a href="#types">Types</a></li><li><a href="#return-codes">Return codes</a></li><li><a href="#column-data-types">Column data types</a></li><li><a href="#general-database-operations">General database operations</a></li><li><a href="#prepared-statements">Prepared Statements</a><ul><li><a href="#data-query">Data query</a></li><li><a href="#binding-data-to-statements">Binding data to statements</a></li><li><a href="#executing-statements">Executing statements</a></li><li><a href="#stepwise-query-convenience-functions">Stepwise query convenience functions</a></li></ul></li><li><a href="#user-defined-functions">User-defined functions</a></li><li><a href="#utility-functions">Utility functions</a></li></ul></nav><div class="odoc-content"><h3 id="exceptions"><a href="#exceptions" class="anchor"></a>Exceptions</h3><div class="odoc-spec"><div class="spec exception anchored" id="exception-InternalError"><a href="#exception-InternalError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">InternalError</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p><code>InternalError reason</code> is raised when the bindings detect an unknown/unsupported situation.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Error"><a href="#exception-Error" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Error</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p><code>Error reason</code> is raised when some SQL operation is called on a nonexistent handle and the functions does not return a return code, or if there is no error code corresponding to this error. Functions returning return codes communicate errors by returning the specific error code.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-RangeError"><a href="#exception-RangeError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">RangeError</span> <span class="keyword">of</span> int * int</span></code></div><div class="spec-doc"><p><code>RangeError (index, maximum)</code> is raised if some column or bind operation refers to a nonexistent column or binding. The first entry of the returned tuple is the specified index, the second is the limit which was violated.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-DataTypeError"><a href="#exception-DataTypeError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">DataTypeError</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p><code>DataTypeError msg</code> is raised when you attempt to convert a <code>Data.t</code> structure to an object via an invalid conversion.</p></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-SqliteError"><a href="#exception-SqliteError" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">SqliteError</span> <span class="keyword">of</span> string</span></code></div><div class="spec-doc"><p><code>SqliteError err_msg</code> is raised after calling <code>Rc.check</code> on a return code that does not indicate success.</p></div></div><h3 id="library-information"><a href="#library-information" class="anchor"></a>Library Information</h3><div class="odoc-spec"><div class="spec value anchored" id="val-sqlite_version"><a href="#val-sqlite_version" class="anchor"></a><code><span><span class="keyword">val</span> sqlite_version : <span>unit <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>sqlite_version ()</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the version of the SQLite3 library being used, in format <code>3XXXYYY</code> where <code>XXX</code> is the minor version and <code>YYY</code> is the patch level. For example, <code>3030001</code> for 3.30.1.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sqlite_version_info"><a href="#val-sqlite_version_info" class="anchor"></a><code><span><span class="keyword">val</span> sqlite_version_info : <span>unit <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>sqlite_version_info ()</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the version of the SQLite3 library being used in a human-readable string.</p></li></ul></div></div><h3 id="types"><a href="#types" class="anchor"></a>Types</h3><div class="odoc-spec"><div class="spec type anchored" id="type-db"><a href="#type-db" class="anchor"></a><code><span><span class="keyword">type</span> db</span></code></div><div class="spec-doc"><p>Database handle. Used to store information regarding open databases and the error code from the last operation if the function implementing that operation takes a database handle as a parameter.</p><p>NOTE: database handles are closed (see <a href="#val-db_close"><code>db_close</code></a>) automatically when they are reclaimed by the GC unless they have already been closed earlier by the user. It is good practice to manually close database handles to free resources as quickly as possible.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://sqlite.org/threadsafe.html" class="value">https://sqlite.org/threadsafe.html</a> <p>about thread safety when accessing database handles and also consider using the <code>mutex</code> flag with <a href="#val-db_open"><code>db_open</code></a> if necessary.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-stmt"><a href="#type-stmt" class="anchor"></a><code><span><span class="keyword">type</span> stmt</span></code></div><div class="spec-doc"><p>Compiled statement handle. Stores information about compiled statements created by the <code>prepare</code> or <code>prepare_tail</code> functions.</p><ul class="at-tags"><li class="see"><span class="at-tag">see</span> <a href="https://sqlite.org/threadsafe.html" class="value">https://sqlite.org/threadsafe.html</a> <p>about thread safety when accessing statement handles.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-header"><a href="#type-header" class="anchor"></a><code><span><span class="keyword">type</span> header</span><span> = string</span></code></div><div class="spec-doc"><p>Type of name of a column returned by queries.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-headers"><a href="#type-headers" class="anchor"></a><code><span><span class="keyword">type</span> headers</span><span> = <span><a href="#type-header">header</a> array</span></span></code></div><div class="spec-doc"><p>Type of names of columns returned by queries.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-row"><a href="#type-row" class="anchor"></a><code><span><span class="keyword">type</span> row</span><span> = <span><span>string option</span> array</span></span></code></div><div class="spec-doc"><p>Type of row data (with potential NULL-values)</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-row_not_null"><a href="#type-row_not_null" class="anchor"></a><code><span><span class="keyword">type</span> row_not_null</span><span> = <span>string array</span></span></code></div><div class="spec-doc"><p>Type of row data (without NULL-values)</p></div></div><h3 id="return-codes"><a href="#return-codes" class="anchor"></a>Return codes</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Rc"><a href="#module-Rc" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Rc/index.html">Rc</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="column-data-types"><a href="#column-data-types" class="anchor"></a>Column data types</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Data"><a href="#module-Data" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Data/index.html">Data</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="general-database-operations"><a href="#general-database-operations" class="anchor"></a>General database operations</h3><div class="odoc-spec"><div class="spec value anchored" id="val-db_open"><a href="#val-db_open" class="anchor"></a><code><span><span class="keyword">val</span> db_open : 
  <span><span class="optlabel">?mode</span>:<span>[ `READONLY <span>| `NO_CREATE</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?uri</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?memory</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mutex</span>:<span>[ `NO <span>| `FULL</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?cache</span>:<span>[ `SHARED <span>| `PRIVATE</span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?vfs</span>:string <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-db">db</a></span></code></div><div class="spec-doc"><p><code>db_open ?mode ?uri ?memory ?mutex ?cache ?vfs filename</code> opens the database file <code>filename</code>, and returns a database handle.</p><p>Special filenames: &quot;:memory:&quot; and &quot;&quot; open an in-memory or temporary database respectively. Behaviour explained here: https://www.sqlite.org/inmemorydb.html</p><p>The optional arguments <code>mode</code>, <code>uri</code>, <code>memory</code> and <code>mutex</code> are only meaningful with SQLite versions &gt;= 3.5, <code>cache</code> only for versions &gt;= 3.6.18. For older versions an exception will be raised if any of them is set to a non-default value. The database is opened read-only if <code>`READONLY</code> is passed as mode. The database file will not be created if it is missing and <code>`NO_CREATE</code> is set. The <code>uri</code> parameter enables URI filename interpretation and corresponds to <code>SQLITE_OPEN_URI</code> in the SQLite3 API. The <code>memory</code> parameter opens an in-memory database and corresponds to <code>SQLITE_OPEN_MEMORY</code> in the SQLite3 API. <code>mutex</code> determines how the database is accessed. The mutex parameters <code>`NO</code> and <code>`FULL</code> correspond to <code>SQLITE_OPEN_NOMUTEX</code> and <code>SQLITE_OPEN_FULLMUTEX</code> in the SQLite3 API respectively. The cache parameters <code>`SHARED</code> and <code>`PRIVATE</code> correspond to <code>SQLITE_OPEN_SHAREDCACHE</code> and <code>SQLITE_OPEN_PRIVATECACHE</code> in the SQLite3 API respectively.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">mode</span> <p>default = read-write, create</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">uri</span> <p>default = false</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">memory</span> <p>default = false</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">mutex</span> <p>default = nothing</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cache</span> <p>default = nothing</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">vfs</span> <p>default = nothing</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-db_close"><a href="#val-db_close" class="anchor"></a><code><span><span class="keyword">val</span> db_close : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>db_close db</code> closes database <code>db</code> and invalidates the handle.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>false</code> if database was busy (database not closed in this case!), <code>true</code> otherwise.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-let&amp;"><a href="#val-let&amp;" class="anchor"></a><code><span><span class="keyword">val</span> let&amp; : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>let&amp; db = db_open &quot;...&quot; in ...scope that uses db...</code> ensures that the database <code>db</code> is safely closed at the end of the scope, even if there is an exception somewhere in the scope.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Fun.Finally_raised</code> <p>if the database could not be closed successfully.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-enable_load_extension"><a href="#val-enable_load_extension" class="anchor"></a><code><span><span class="keyword">val</span> enable_load_extension : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>enable_load_extension db onoff</code> enable/disable the SQLite3 load extension.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>false</code> if the operation fails, <code>true</code> otherwise.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-errcode"><a href="#val-errcode" class="anchor"></a><code><span><span class="keyword">val</span> errcode : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>errcode db</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the error code of the last operation on database <code>db</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-errmsg"><a href="#val-errmsg" class="anchor"></a><code><span><span class="keyword">val</span> errmsg : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>errmsg db</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the error message of the last operation on database <code>db</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-extended_errcode_int"><a href="#val-extended_errcode_int" class="anchor"></a><code><span><span class="keyword">val</span> extended_errcode_int : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>extended_errcode_int db</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the extended error code of the last operation on the database <code>db</code> as an integer.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-last_insert_rowid"><a href="#val-last_insert_rowid" class="anchor"></a><code><span><span class="keyword">val</span> last_insert_rowid : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>last_insert_rowid db</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the index of the row inserted by the last operation on database <code>db</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec"><a href="#val-exec" class="anchor"></a><code><span><span class="keyword">val</span> exec : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="optlabel">?cb</span>:<span>(<span><a href="#type-row">row</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-headers">headers</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>exec db ?cb sql</code> performs SQL-operation <code>sql</code> on database <code>db</code>. If the operation contains query statements, then the callback function <code>cb</code> will be called for each matching row. The first parameter of the callback contains the contents of the row, the second parameter contains the headers of the columns associated with the row. Exceptions raised within the callback will abort the execution and escape <a href="#val-exec"><code>exec</code></a>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the operation.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">cb</span> <p>default = no callback</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec_no_headers"><a href="#val-exec_no_headers" class="anchor"></a><code><span><span class="keyword">val</span> exec_no_headers : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">cb</span>:<span>(<span><a href="#type-row">row</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>exec_no_headers db ?cb sql</code> performs SQL-operation <code>sql</code> on database <code>db</code>. If the operation contains query statements, then the callback function <code>cb</code> will be called for each matching row. The parameter of the callback is the contents of the row. Exceptions raised within the callback will abort the execution and escape <a href="#val-exec_no_headers"><code>exec_no_headers</code></a>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec_not_null"><a href="#val-exec_not_null" class="anchor"></a><code><span><span class="keyword">val</span> exec_not_null : 
  <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">cb</span>:<span>(<span><a href="#type-row_not_null">row_not_null</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-headers">headers</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>exec_not_null db ~cb sql</code> performs SQL-operation <code>sql</code> on database <code>db</code>. If the operation contains query statements, then the callback function <code>cb</code> will be called for each matching row. The first parameter of the callback is the contents of the row, which must not contain NULL-values, the second paramater are the headers of the columns associated with the row. Exceptions raised within the callback will abort the execution and escape <a href="#val-exec_not_null"><code>exec_not_null</code></a>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if a row contains NULL.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec_not_null_no_headers"><a href="#val-exec_not_null_no_headers" class="anchor"></a><code><span><span class="keyword">val</span> exec_not_null_no_headers : 
  <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">cb</span>:<span>(<span><a href="#type-row_not_null">row_not_null</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>exec_not_null_no_headers db ~cb sql</code> performs SQL-operation <code>sql</code> on database <code>db</code>. If the operation contains query statements, then the callback function <code>cb</code> will be called for each matching row. The parameter of the callback is the contents of the row, which must not contain NULL-values. Exceptions raised within the callback will abort the execution and escape <a href="#val-exec_not_null_no_headers"><code>exec_not_null_no_headers</code></a>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if a row contains NULL.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-changes"><a href="#val-changes" class="anchor"></a><code><span><span class="keyword">val</span> changes : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>changes db</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of rows that were changed or inserted or deleted by the most recently completed SQL statement on database <code>db</code>.</p></li></ul></div></div><h3 id="prepared-statements"><a href="#prepared-statements" class="anchor"></a>Prepared Statements</h3><div class="odoc-spec"><div class="spec value anchored" id="val-prepare"><a href="#val-prepare" class="anchor"></a><code><span><span class="keyword">val</span> prepare : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stmt">stmt</a></span></code></div><div class="spec-doc"><p><code>prepare db sql</code> compile SQL-statement <code>sql</code> for database <code>db</code> into bytecode. The statement may be only partially compiled. In this case <a href="#val-prepare_tail"><code>prepare_tail</code></a> can be called on the returned statement to compile the remaining part of the SQL-statement.</p><p>NOTE: this really uses the C-function <code>sqlite3_prepare_v2</code>, i.e. avoids the older, deprecated <code>sqlite3_prepare</code>-function.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be prepared.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prepare_or_reset"><a href="#val-prepare_or_reset" class="anchor"></a><code><span><span class="keyword">val</span> prepare_or_reset : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span><a href="#type-stmt">stmt</a> option</span> <span class="xref-unresolved">Stdlib</span>.ref</span> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-stmt">stmt</a></span></code></div><div class="spec-doc"><p><code>prepare_or_reset db opt_stmt_ref sql</code> if <code>opt_stmt_ref</code> contains <code>Some stmt</code>, then <code>stmt</code> will be reset and returned. Otherwise fresh statement <code>stmt</code> will be prepared, stored as <code>Some stmt</code> in <code>opt_stmt_ref</code> and then returned. This is useful for executing multiple identical commands in a loop, because we can more efficiently reuse the statement from previous iterations.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be prepared or reset.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-prepare_tail"><a href="#val-prepare_tail" class="anchor"></a><code><span><span class="keyword">val</span> prepare_tail : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-stmt">stmt</a> option</span></span></code></div><div class="spec-doc"><p><code>prepare_tail stmt</code> compile the remaining part of the SQL-statement <code>stmt</code> to bytecode.</p><p>NOTE: this really uses the C-function <code>sqlite3_prepare_v2</code>, i.e. avoids the older, deprecated <code>sqlite3_prepare</code>-function.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>None</code> if there was no remaining part, or <code>Some remaining_part</code> otherwise.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be prepared.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-recompile"><a href="#val-recompile" class="anchor"></a><code><span><span class="keyword">val</span> recompile : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>recompile stmt</code> recompiles the SQL-statement associated with <code>stmt</code> to bytecode. The statement may be only partially compiled. In this case <a href="#val-prepare_tail"><code>prepare_tail</code></a> can be called on the statement to compile the remaining part of the SQL-statement. Call this function if the statement expires due to some schema change.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be recompiled.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-finalize"><a href="#val-finalize" class="anchor"></a><code><span><span class="keyword">val</span> finalize : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>finalize stmt</code> finalizes the statement <code>stmt</code>. After finalization, the only valid usage of the statement is to use it in <a href="#val-prepare_tail"><code>prepare_tail</code></a>, or to <a href="#val-recompile"><code>recompile</code></a> it.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be finalized.</p></li></ul></div></div><h4 id="data-query"><a href="#data-query" class="anchor"></a>Data query</h4><div class="odoc-spec"><div class="spec value anchored" id="val-data_count"><a href="#val-data_count" class="anchor"></a><code><span><span class="keyword">val</span> data_count : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>data_count stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of columns in the result of the last step of statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_count"><a href="#val-column_count" class="anchor"></a><code><span><span class="keyword">val</span> column_count : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>column_count stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of columns that would be returned by executing statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column"><a href="#val-column" class="anchor"></a><code><span><span class="keyword">val</span> column : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a></span></code></div><div class="spec-doc"><p><code>column stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_bool"><a href="#val-column_bool" class="anchor"></a><code><span><span class="keyword">val</span> column_bool : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>column_bool stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as a <code>bool</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_text"><a href="#val-column_text" class="anchor"></a><code><span><span class="keyword">val</span> column_text : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>column_text stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as text (a <code>string</code>).</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_int"><a href="#val-column_int" class="anchor"></a><code><span><span class="keyword">val</span> column_int : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>column_int stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as an <code>int</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Failure</code> <p>if the integer conversion over- or underflows.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_nativeint"><a href="#val-column_nativeint" class="anchor"></a><code><span><span class="keyword">val</span> column_nativeint : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> nativeint</span></code></div><div class="spec-doc"><p><code>column_nativeint stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as a <code>nativeint</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Failure</code> <p>if the integer conversion over- or underflows.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_int32"><a href="#val-column_int32" class="anchor"></a><code><span><span class="keyword">val</span> column_int32 : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int32</span></code></div><div class="spec-doc"><p><code>column_int32 stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as an <code>int32</code>. Note that this function exactly corresponds to the C-library function <code>sqlite3_column_int</code> and does not check for over- or underflow during integer conversions.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_int64"><a href="#val-column_int64" class="anchor"></a><code><span><span class="keyword">val</span> column_int64 : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int64</span></code></div><div class="spec-doc"><p><code>column_int64 stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as an <code>int64</code>. Note that this function exactly corresponds to the C-library function <code>sqlite3_column_int64</code> and does not check for over- or underflow during integer conversions.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_double"><a href="#val-column_double" class="anchor"></a><code><span><span class="keyword">val</span> column_double : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p><code>column_double stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the data in column <code>n</code> of the result of the last step of statement <code>stmt</code> as a double <code>float</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_blob"><a href="#val-column_blob" class="anchor"></a><code><span><span class="keyword">val</span> column_blob : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>column_blob stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the blob string in column <code>n</code> of the result of the last step of statement <code>stmt</code> as a <code>string</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_name"><a href="#val-column_name" class="anchor"></a><code><span><span class="keyword">val</span> column_name : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="#type-header">header</a></span></code></div><div class="spec-doc"><p><code>column_name stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the header of column <code>n</code> in the result set of statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-column_decltype"><a href="#val-column_decltype" class="anchor"></a><code><span><span class="keyword">val</span> column_decltype : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>column_decltype stmt n</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the declared type of the specified column in the result set of statement <code>stmt</code> as <code>Some str</code> if available, or as <code>None</code> otherwise.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>n</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><h4 id="binding-data-to-statements"><a href="#binding-data-to-statements" class="anchor"></a>Binding data to statements</h4><div class="odoc-spec"><div class="spec value anchored" id="val-bind"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind stmt pos data</code> binds the value <code>data</code> to the free variable at position <code>pos</code> of statement <code>stmt</code>. NOTE: the first variable has index <code>1</code>!</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_text"><a href="#val-bind_text" class="anchor"></a><code><span><span class="keyword">val</span> bind_text : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_text stmt pos str</code> binds the string <code>str</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> as text.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_bool"><a href="#val-bind_bool" class="anchor"></a><code><span><span class="keyword">val</span> bind_bool : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_bool stmt pos b</code> binds the boolean <code>b</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> without having to manually convert it to an <code>int64</code> for use with <code>Data.INT</code>. <code>true</code> is turned into 1, <code>false</code> into 0.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_int"><a href="#val-bind_int" class="anchor"></a><code><span><span class="keyword">val</span> bind_int : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_int stmt pos n</code> binds the integer <code>n</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> without having to manually convert it to an <code>int64</code> for use with <code>Data.INT</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_nativeint"><a href="#val-bind_nativeint" class="anchor"></a><code><span><span class="keyword">val</span> bind_nativeint : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>nativeint <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_nativeint stmt pos n</code> binds the integer <code>n</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> without having to manually convert it to an <code>int64</code> for use with <code>Data.INT</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_int32"><a href="#val-bind_int32" class="anchor"></a><code><span><span class="keyword">val</span> bind_int32 : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int32 <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_int32 stmt pos n</code> binds the 32-bit integer <code>n</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> without having to manually convert it to an <code>int64</code> for use with <code>Data.INT</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_int64"><a href="#val-bind_int64" class="anchor"></a><code><span><span class="keyword">val</span> bind_int64 : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int64 <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_int64 stmt pos n</code> binds the 64-bit integer <code>n</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_double"><a href="#val-bind_double" class="anchor"></a><code><span><span class="keyword">val</span> bind_double : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>float <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_double stmt pos n</code> binds the float <code>n</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_blob"><a href="#val-bind_blob" class="anchor"></a><code><span><span class="keyword">val</span> bind_blob : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_blob stmt pos str</code> binds the string <code>str</code> to the parameter at position <code>pos</code> of the statement <code>stmt</code> as a blob.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_values"><a href="#val-bind_values" class="anchor"></a><code><span><span class="keyword">val</span> bind_values : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="Data/index.html#type-t">Data.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_values stmt lst</code> binds the Nth element of <code>lst</code> to the Nth parameter of the statement.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the first binding that fails, or <code>Rc.OK</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if there aren't at least as many parameters as there are elements of the list.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_name"><a href="#val-bind_name" class="anchor"></a><code><span><span class="keyword">val</span> bind_name : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_name stmt name data</code> binds the value <code>data</code> to the named parameter <code>name</code> of statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if <code>name</code> does not exist.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_names"><a href="#val-bind_names" class="anchor"></a><code><span><span class="keyword">val</span> bind_names : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(string * <a href="Data/index.html#type-t">Data.t</a>)</span> list</span> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>bind_names stmt lst</code> binds the <code>(name, data)</code> pairs in <code>lst</code> to the parameters of statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of the first binding that fails, or <code>Rc.OK</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if a <code>name</code> does not exist.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_parameter_count"><a href="#val-bind_parameter_count" class="anchor"></a><code><span><span class="keyword">val</span> bind_parameter_count : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>bind_parameter_count stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of free variables in statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_parameter_name"><a href="#val-bind_parameter_name" class="anchor"></a><code><span><span class="keyword">val</span> bind_parameter_name : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>string option</span></span></code></div><div class="spec-doc"><p><code>bind_parameter_name stmt pos</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>Some parameter_name</code> of the free variable at position <code>pos</code> of statement <code>stmt</code>, or <code>None</code> if it is ordinary (&quot;?&quot;).</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-RangeError"><code>RangeError</code></a> <p>if <code>pos</code> is out of range.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bind_parameter_index"><a href="#val-bind_parameter_index" class="anchor"></a><code><span><span class="keyword">val</span> bind_parameter_index : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>bind_parameter_index stmt name</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the position of the free variable with name <code>name</code> in statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <code>Not_found</code> <p>if <code>name</code> was not found.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear_bindings"><a href="#val-clear_bindings" class="anchor"></a><code><span><span class="keyword">val</span> clear_bindings : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>clear_bindings stmt</code> resets all bindings associated with prepared statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><h4 id="executing-statements"><a href="#executing-statements" class="anchor"></a>Executing statements</h4><div class="odoc-spec"><div class="spec value anchored" id="val-step"><a href="#val-step" class="anchor"></a><code><span><span class="keyword">val</span> step : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>step stmt</code> performs one step of the query associated with SQL-statement <code>stmt</code>.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the step could not be executed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-reset"><a href="#val-reset" class="anchor"></a><code><span><span class="keyword">val</span> reset : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>reset stmt</code> resets the statement <code>stmt</code>, e.g. to restart the query, perhaps with different bindings.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the return code of this operation.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement could not be reset.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span><span class="keyword">val</span> iter : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span><a href="Data/index.html#type-t">Data.t</a> array</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a></span></code></div><div class="spec-doc"><p><code>iter stmt ~f</code> will call <code>f</code> once per row returned by stepping through <code>stmt</code>. The statement is automatically reset afterwards.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>Rc.DONE</code> on success or another return code on error.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span><span class="keyword">val</span> fold : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="Data/index.html#type-t">Data.t</a> array</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">init</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="Rc/index.html#type-t">Rc.t</a> * <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>fold stmt ~f ~init</code> folds over the rows returned by <code>stmt</code> with function <code>f</code> and initial value <code>init</code>. The statement is automatically reset afterwards.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p><code>(rc, acc)</code> where <code>acc</code> is the last accumulated value returned by <code>f</code> after being called on a row. <code>rc</code> is <code>Rc.DONE</code> if all rows were processed and if the statement could be reset, otherwise an error code.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><h4 id="stepwise-query-convenience-functions"><a href="#stepwise-query-convenience-functions" class="anchor"></a>Stepwise query convenience functions</h4><div class="odoc-spec"><div class="spec value anchored" id="val-row_blobs"><a href="#val-row_blobs" class="anchor"></a><code><span><span class="keyword">val</span> row_blobs : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code></div><div class="spec-doc"><p><code>row_blobs stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the blobs returned by the last query step performed with statement <code>stmt</code> (array of blobs).</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-row_data"><a href="#val-row_data" class="anchor"></a><code><span><span class="keyword">val</span> row_data : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> array</span></span></code></div><div class="spec-doc"><p><code>row_data stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>all data values in the row returned by the last query step performed with statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-row_names"><a href="#val-row_names" class="anchor"></a><code><span><span class="keyword">val</span> row_names : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-headers">headers</a></span></code></div><div class="spec-doc"><p><code>row_names stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>all column headers of the row returned by the last query step performed with statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-row_decltypes"><a href="#val-row_decltypes" class="anchor"></a><code><span><span class="keyword">val</span> row_decltypes : <span><a href="#type-stmt">stmt</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string option</span> array</span></span></code></div><div class="spec-doc"><p><code>row_decltypes stmt</code></p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>all column type declarations of the row returned by the last query step performed with statement <code>stmt</code>.</p></li></ul><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if the statement is invalid.</p></li></ul></div></div><h3 id="user-defined-functions"><a href="#user-defined-functions" class="anchor"></a>User-defined functions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-create_funN"><a href="#val-create_funN" class="anchor"></a><code><span><span class="keyword">val</span> create_funN : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span><a href="Data/index.html#type-t">Data.t</a> array</span> <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_funN db name f</code> registers function <code>f</code> under name <code>name</code> with database handle <code>db</code>. The function has arity <code>N</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_fun0"><a href="#val-create_fun0" class="anchor"></a><code><span><span class="keyword">val</span> create_fun0 : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_funN db name f</code> registers function <code>f</code> under name <code>name</code> with database handle <code>db</code>. The function has arity <code>0</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_fun1"><a href="#val-create_fun1" class="anchor"></a><code><span><span class="keyword">val</span> create_fun1 : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_fun1 db name f</code> registers function <code>f</code> under name <code>name</code> with database handle <code>db</code>. The function has arity <code>1</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_fun2"><a href="#val-create_fun2" class="anchor"></a><code><span><span class="keyword">val</span> create_fun2 : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_fun2 db name f</code> registers function <code>f</code> under name <code>name</code> with database handle <code>db</code>. The function has arity <code>2</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_fun3"><a href="#val-create_fun3" class="anchor"></a><code><span><span class="keyword">val</span> create_fun3 : 
  <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Data/index.html#type-t">Data.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Data/index.html#type-t">Data.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>create_fun3 db name f</code> registers function <code>f</code> under name <code>name</code> with database handle <code>db</code>. The function has arity <code>3</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delete_function"><a href="#val-delete_function" class="anchor"></a><code><span><span class="keyword">val</span> delete_function : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>delete_function db name</code> deletes function with name <code>name</code> from database handle <code>db</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Aggregate"><a href="#module-Aggregate" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Aggregate/index.html">Aggregate</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Create user-defined aggregate and window functions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_collation"><a href="#val-create_collation" class="anchor"></a><code><span><span class="keyword">val</span> create_collation : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>create_collation db name func</code> creates a collation with <code>name</code> in database handle <code>db</code>. <code>func</code> is called when the collation is needed, it must return an integer that is negative, zero, or positive if the first string is less than, equal to, or greater than the second, respectively</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-delete_collation"><a href="#val-delete_collation" class="anchor"></a><code><span><span class="keyword">val</span> delete_collation : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>delete_collation db name</code> deletes collation with name <code>name</code> from database handle <code>db</code>.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Backup"><a href="#module-Backup" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Backup/index.html">Backup</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><h3 id="utility-functions"><a href="#utility-functions" class="anchor"></a>Utility functions</h3><div class="odoc-spec"><div class="spec value anchored" id="val-busy_timeout"><a href="#val-busy_timeout" class="anchor"></a><code><span><span class="keyword">val</span> busy_timeout : <span><a href="#type-db">db</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>busy_timeout db ms</code> sets a busy handler that sleeps for a specified amount of time when a table is locked. The handler will sleep multiple times until at least <code>ms</code> milliseconds of sleeping have accumulated.</p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="#exception-SqliteError"><code>SqliteError</code></a> <p>if an invalid database handle is passed.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sleep"><a href="#val-sleep" class="anchor"></a><code><span><span class="keyword">val</span> sleep : <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>sleep ms</code> sleeps at least <code>ms</code> milliseconds.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>the number of milliseconds of sleep actually requested from the operating system.</p></li></ul></div></div></div></body></html>
